(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,s=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"custom-post-type-events/events","title":"Events","category":"widgets","icon":"category","description":"Shows a custom events loop","textdomain":"custom-post-type-events","attributes":{"page":{"type":"string","default":"1"},"postLayout":{"type":"string","default":"list"},"gridColumns":{"type":"integer","default":-1},"gridColumnsMax":{"type":"integer","default":12},"orderBy":{"type":"string","default":"date"},"order":{"type":"string","default":"asc"},"numberOfItems":{"type":"number","default":10},"offset":{"type":"number","default":0},"postIn":{"type":"array","default":[]},"useGrid":{"type":"boolean","default":true},"eventCategory":{"type":"array","default":[]}},"supports":{"anchor":true,"align":true,"spacing":{"margin":true,"padding":true,"blockGap":true}},"editorScript":"file:./index.js","style":"file:./index.css"}'),o=window.wp.serverSideRender;var n=e.n(o);window.React;const r=window.wp.data,i=window.wp.i18n,a=window.wp.element,l=window.wp.components,d=window.wp.blockEditor,p=window.ReactJSXRuntime,u=e=>{const{setAttributes:t,order:s,orderBy:o,numberOfItems:n,orderByValues:u,offset:m,postIn:c,postType:g,showPostsMax:y,offsetMax:w,postLayout:x,gridColumns:f,gridColumnsMax:v,useGrid:h,page:b}=e,{posts:_,postTaxonomies:j,postTypeData:C}=(0,r.useSelect)((t=>{const{getEntityRecords:s,getTaxonomy:o,getPostType:n}=t("core"),r=n(g),i=[];let a=[];return r&&r.taxonomies&&r.taxonomies.map((e=>{const t=o(e);t&&(t.terms=s("taxonomy",e,{per_page:100}),i.push(t))})),a=s("postType",e.postType,{per_page:100}),{postTypeData:r,posts:a,postTaxonomies:i}}),[e.postType]),O=v||12,T=[{icon:"list-view",title:(0,i.__)("List View"),onClick:()=>t({postLayout:"list",gridColumns:-1}),isActive:"list"===x},{icon:"grid-view",title:(0,i.__)("Grid View"),onClick:()=>t({postLayout:"grid",gridColumns:4}),isActive:"grid"===x}],k=[],B=[o,s].join("/"),P=u||[{value:"title/asc",label:(0,i.__)("A â†’ Z")},{value:"date/desc",label:(0,i.__)("Newest to Oldest")},{value:"date/asc",label:(0,i.__)("Oldest to Newest")},{value:"menu_order/asc",label:(0,i.__)("Menu order")}],R=y||100,S=w||100,I=e=>e.replace(/([-_][a-z])/g,(e=>e.toUpperCase().replace("-","").replace("_","")));j&&j.map(((s,o)=>{let n=[];null!==s.terms&&(n=(e[I(s.slug)]?e[I(s.slug)]:[]).map((e=>{let t=s.terms.find((t=>t.id===e));return!(void 0===t||!t)&&t.name}))),s.terms||(s.terms=[]),k.push((0,p.jsx)(l.PanelBody,{title:s.name,children:(0,p.jsx)(l.FormTokenField,{value:n,suggestions:s.terms.map((e=>e.name)),onChange:e=>{let o=[];e.map((e=>{const t=s.terms.find((t=>t.name===e));void 0!==t&&o.push(t.id)}));let n=[];n[I(s.slug)]=o,n={...n},t(n)}})},`taxonomy-${o}`))}));let A=[],M=[];return null!==_&&_.length&&c&&(_.map((e=>{M.push(e.title.raw)})),A=c.map((e=>{let t=_.find((t=>t.id===e));return!(void 0===t||!t)&&t.title.raw}))),(0,p.jsxs)(a.Fragment,{children:[h&&(0,p.jsx)(d.BlockControls,{children:(0,p.jsx)(l.Toolbar,{controls:T})}),(0,p.jsxs)(d.InspectorControls,{children:[k,(!A||0===A.length)&&(0,p.jsx)(l.PanelBody,{title:(0,i.__)("Order"),initialOpen:!1,children:(0,p.jsx)(l.SelectControl,{value:B,onChange:e=>{const[s,o]=e.split("/");t({orderBy:s,order:o})},options:P})}),(0,p.jsxs)(l.PanelBody,{title:(0,i.__)("Number of items"),initialOpen:!1,children:[(0,p.jsx)(l.RangeControl,{value:n,onChange:e=>{t({numberOfItems:e})},min:1,max:R,required:!0}),(0,p.jsx)(l.__experimentalNumberControl,{label:"Page",value:b,onChange:e=>{t({page:e})}})]}),"grid"===x&&(0,p.jsx)(l.PanelBody,{title:(0,i.__)("Grid columns"),initialOpen:!1,children:(0,p.jsx)(l.RangeControl,{value:f,onChange:e=>{t({gridColumns:e})},min:1,max:O})}),(0,p.jsx)(l.PanelBody,{title:(0,i.__)("Offset"),initialOpen:!1,children:(0,p.jsx)(l.RangeControl,{value:m,onChange:e=>{t({offset:e})},min:0,max:S,required:!0})}),_&&(0,p.jsx)(l.PanelBody,{title:C.name,initialOpen:!1,children:(0,p.jsx)(l.FormTokenField,{label:"",value:A,suggestions:M,maxSuggestions:20,onChange:e=>{let s=[];e.map((e=>{const t=_.find((t=>t.title.raw===e));void 0!==t&&s.push(t.id)})),t({postIn:s})}})})]})]})};(0,t.registerBlockType)(s,{edit:({attributes:e,setAttributes:t})=>(0,p.jsxs)("div",{...(0,d.useBlockProps)(),children:[(0,p.jsx)(u,{postType:"event",...e,setAttributes:t}),(0,p.jsx)(n(),{block:"custom-post-type-events/events",attributes:e})]})})})();