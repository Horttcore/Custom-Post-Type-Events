{"version":3,"file":"index.js","mappings":"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","sources":["webpack://custom-post-type-events/./src/Meta/date-picker.js","webpack://custom-post-type-events/external window \"React\"","webpack://custom-post-type-events/external window \"ReactJSXRuntime\"","webpack://custom-post-type-events/external window [\"wp\",\"components\"]","webpack://custom-post-type-events/external window [\"wp\",\"coreData\"]","webpack://custom-post-type-events/external window [\"wp\",\"data\"]","webpack://custom-post-type-events/external window [\"wp\",\"editor\"]","webpack://custom-post-type-events/external window [\"wp\",\"element\"]","webpack://custom-post-type-events/external window [\"wp\",\"i18n\"]","webpack://custom-post-type-events/external window [\"wp\",\"plugins\"]","webpack://custom-post-type-events/webpack/bootstrap","webpack://custom-post-type-events/webpack/runtime/compat get default export","webpack://custom-post-type-events/webpack/runtime/define property getters","webpack://custom-post-type-events/webpack/runtime/hasOwnProperty shorthand","webpack://custom-post-type-events/webpack/runtime/make namespace object","webpack://custom-post-type-events/./src/Meta/index.js"],"sourcesContent":["import React from \"react\";\nimport { select } from '@wordpress/data';\nimport { __ } from \"@wordpress/i18n\";\nimport { useEffect, useState } from \"@wordpress/element\";\nimport { useEntityProp } from \"@wordpress/core-data\";\nimport { PluginDocumentSettingPanel } from \"@wordpress/editor\";\nimport { TextControl, ToggleControl } from \"@wordpress/components\";\n\nexport default function DateTimePicker() {\n    // Load only for events\n    const postType = select(\"core/editor\").getCurrentPostType();\n    if (postType !== \"event\") {\n        return;\n    }\n\n    const format = (x, y) => {\n        let z = {\n            m: x.getMonth() + 1,\n            d: x.getDate(),\n            h: x.getHours(),\n            i: x.getMinutes(),\n            s: x.getSeconds(),\n        };\n        y = y.replace(/(M+|d+|h+|m+|s+)/g, function (v) {\n            return ((v.length > 1 ? \"0\" : \"\") + z[v.slice(-1)]).slice(-2);\n        });\n\n        return y.replace(/(y+)/g, function (v) {\n            return x.getFullYear().toString().slice(-v.length);\n        });\n    };\n\n    // Load meta\n    const [meta, setMeta] = useEntityProp(\"postType\", \"event\", \"meta\");\n    if (!meta) {\n        return;\n    }\n\n    const eventStart = meta[`eventStart`] ? new Date(meta[`eventStart`]) : \"\";\n    const eventEnd = meta[`eventEnd`] ? new Date(meta[`eventEnd`]) : \"\";\n\n    const [startDate, setStartDate] = useState(\n        eventStart ? meta[`eventStart`].split(\" \")[0] : \"\"\n    );\n    const [endDate, setEndDate] = useState(\n        eventEnd !== \"\" ? meta[`eventEnd`].split(\" \")[0] : startDate || \"\"\n    );\n\n    const startDatetime = meta[`eventStart`]\n        ? meta[`eventStart`].split(\" \")[1]\n        : \"00:00:00\";\n    const endDatetime = meta[`eventEnd`]\n        ? meta[`eventEnd`].split(\" \")[1]\n        : \"23:59:59\";\n\n    const [startTime, setStartTime] = useState(\n        startDatetime ? startDatetime.replace(/:00$/, \"\") : \"\"\n    );\n    const [endTime, setEndTime] = useState(\n        eventEnd && endDatetime ? endDatetime.replace(/:59|:00$/, \"\") : \"\"\n    );\n\n    const [isAllDay, setIsAllDay] = useState(\n        (!startDatetime || startDatetime === \"00:00:00\") &&\n        (!endDatetime || endDatetime === \"23:59:59\")\n    );\n    const [isMultiDay, setIsMultiDay] = useState(\n        !(\n            !eventStart ||\n            !eventEnd ||\n            (eventStart.getFullYear() === eventEnd.getFullYear() &&\n                eventStart.getMonth() === eventEnd.getMonth() &&\n                eventStart.getDate() === eventEnd.getDate())\n        )\n    );\n\n    useEffect(() => {\n        const regex = new RegExp(/^[0-2]?[0-9]:[0-5][0-9]$/);\n        const sTime = regex.test(startTime) ? `${startTime}:00` : \"\";\n        const eTime = regex.test(endTime) ? `${endTime}:00` : \"\";\n        setMeta({\n            ...meta,\n            eventStart: `${startDate} ${sTime}`.trim(),\n            eventEnd: `${endDate} ${eTime}`.trim(),\n        });\n    }, [startDate, startTime, endDate, endTime]);\n\n    return (\n        <PluginDocumentSettingPanel\n            name=\"datetime-picker\"\n            title={__(\"Event Date\", \"custom-post-type-events\")}\n        >\n            <div style={{ display: \"flex\", gap: \"1em\" }}>\n                <ToggleControl\n                    label={__(\"Multi-day\", \"custom-post-type-events\")}\n                    checked={isMultiDay}\n                    onChange={(isMultiDay) => {\n                        setIsMultiDay(isMultiDay);\n                        if (!isMultiDay) {\n                            setEndDate(startDate);\n                        }\n                    }}\n                />\n\n                <ToggleControl\n                    label={__(\"All-day\", \"custom-post-type-events\")}\n                    checked={isAllDay}\n                    onChange={(isAllDay) => {\n                        setIsAllDay(isAllDay);\n                        if (!isAllDay) {\n                            setStartTime(\"\");\n                            setEndTime(\"\");\n                        }\n                    }}\n                />\n            </div>\n\n            <TextControl\n                label={\n                    isMultiDay\n                        ? __(\"Start date\", \"custom-post-type-events\")\n                        : __(\"Date\", \"custom-post-type-events\")\n                }\n                placeholder={__(\"dd.mm.yyyy\", \"custom-post-type-events\")}\n                value={startDate}\n                onChange={(startDate) => {\n                    setStartDate(startDate);\n                    if (!isMultiDay) {\n                        setEndDate(startDate);\n                    }\n                }}\n                type=\"date\"\n            />\n\n            {isMultiDay && (\n                <TextControl\n                    label={__(\"End date\", \"custom-post-type-events\")}\n                    placeholder={__(\"dd.mm.yyyy\", \"custom-post-type-events\")}\n                    value={endDate}\n                    onChange={(endDate) => setEndDate(endDate)}\n                    type=\"date\"\n                />\n            )}\n\n            {!isAllDay && (\n                <div style={{ display: \"flex\", alignItems: \"center\", gap: \".25em\" }}>\n                    <TextControl\n                        label={__(\"From\", \"custom-post-type-events\")}\n                        placeholder={__(\"hh:ii\", \"custom-post-type-events\")}\n                        value={startTime}\n                        onChange={(newValue) => setStartTime(newValue)}\n                    />\n\n                    <span style={{ paddingTop: \"1.125em\" }}>&rarr;</span>\n\n                    <TextControl\n                        label={__(\"To\", \"custom-post-type-events\")}\n                        placeholder={__(\"hh:ii\", \"custom-post-type-events\")}\n                        value={endTime}\n                        onChange={(newValue) => setEndTime(newValue)}\n                    />\n                </div>\n            )}\n        </PluginDocumentSettingPanel>\n    );\n}\n","module.exports = window[\"React\"];","module.exports = window[\"ReactJSXRuntime\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"plugins\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import EventDateTimePicker from './date-picker.js';\nimport { __ } from '@wordpress/i18n';\nimport { registerPlugin } from '@wordpress/plugins';\n\nregisterPlugin(\n    'event-datetime-picker',\n    {\n        render: EventDateTimePicker,\n        icon: '',\n    }\n);"],"names":["React","select","__","useEffect","useState","useEntityProp","PluginDocumentSettingPanel","TextControl","ToggleControl","jsx","_jsx","jsxs","_jsxs","DateTimePicker","postType","getCurrentPostType","format","x","y","z","m","getMonth","d","getDate","h","getHours","i","getMinutes","s","getSeconds","replace","v","length","slice","getFullYear","toString","meta","setMeta","eventStart","Date","eventEnd","startDate","setStartDate","split","endDate","setEndDate","startDatetime","endDatetime","startTime","setStartTime","endTime","setEndTime","isAllDay","setIsAllDay","isMultiDay","setIsMultiDay","regex","RegExp","sTime","test","eTime","trim","name","title","children","style","display","gap","label","checked","onChange","placeholder","value","type","alignItems","newValue","paddingTop","EventDateTimePicker","registerPlugin","render","icon"],"sourceRoot":""}